<%= turbo_stream.update "flash", partial: "layouts/flash" %>
<section  data-controller="timer">
	<div class = "container py-5 ">
		<div class = "row d-flex justify-content-center align-items-center ">
			<div class = "col col-xl-8">
				<div class = "card shadow" style = "border-radius: 1rem;">
					<div class = "row g-0">
						<div class = "col-md-4 col-lg-5 d-none d-md-block m-2">
							<%= image_tag "otp3.png", class: "img-fluid", style: "border-radius: 10px; filter: drop-shadow(10px 7px 12px #e65646);" %>
						</div>
						<div class = "col-md-6 col-lg-5 d-flex align-items-center">
							<div class = "card-body pt-1 p-md-3 text-black">

								<%= form_with(url: :user_session, method: :post) do |f| %>

									<div class = "d-flex align-items-center mb-3 pb-1">
										<span class = "h1 fw-bold mb-0">
											<%= image_tag "bus_logo2.png", class: "form_img" %>
										</span>
										<span class = "h2 fw-bold mb-1"> OTP verifiction</span>
									</div>

									<div class = "form-outline mb-2 pb-2">
										<%= f.hidden_field :email, value: email %>
										<%= f.hidden_field :remember_me, value: remember_me %>
										<%= f.hidden_field :otp_step, value: true %>
										<%= f.label :otp, "OTP", class: "m-2 text-bold" %>
										<%= f.text_field :otp, value: "", placeholder: "Enter OTP", required: "",
																						autofocus: true, class: "form-control form-control-md" %>
									</div>
									
									<div class = "pt-1 mb-3">
										<%= f.submit "Submit", data: { turbo_frame: "_top" }, class: "btn btn-outline-success btn-mg btn-block" %>
									</div>   
								<% end %>

								<%= form_with(url: :resend_otp, method: :patch, html: { id: "resend_otp_form" }) do |f| %>
									<%= f.hidden_field :email, value: email %>
									<div class = "pt-1 mb-3">
										<%= f.submit "Resend OTP", data: { turbo_frame: "_top" }, class: "btn btn-outline-success btn-mg btn-block", id: "resend_otp_button" %>
										<div id = "resend_timer"></div>
									</div>   
								<% end %>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
